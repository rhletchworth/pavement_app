<p id="notice"><%= notice %></p>

<div id="map-canvas"></div>

<h1>Events</h1>

<table>
  <thead>
    <tr>
      <th>Venue</th>
      <th>Artist</th>
      <th>Date</th>
      <th>Time</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @events.each do |event| %>
      <tr>
        <td><%= event.venue_id %></td>
        <td><%= event.artist_id %></td>
        <td><%= event.date %></td>
        <td><%= event.time %></td>
        <td><%= link_to 'Show', event %></td>
        <td><%= link_to 'Edit', edit_event_path(event) %></td>
        <td><%= link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<script>

$(document).ready(function (){
    function initialize(){
   
      //var venueCoords = new google.maps.LatLng(<%#= event["lat"] %>, <%#= event["lng"] %>);

      //var contentStringEvent = "<%#= event["displayName"] %> | <%#= event["date"] %> | <%#= event["time"] %>";

      //var contentStringUser = "This is you!";

      //var image = { url: "http://www.iconsplace.com/icons/preview/blue/ticket-256.png", scaledSize: new google.maps.Size(25, 25)
    }

      var eventMarker = new google.maps.Marker({
        position: venueCoords,
        map: map,
        icon: image,
  animation: google.maps.Animation.DROP
      });

      var userMarker = new google.maps.Marker({
        position: userCoords,
      map: map,
  animation: google.maps.Animation.DROP
      });

      var infoWindowEvent = new google.maps.InfoWindow({
        content: contentStringEvent
      });

      google.maps.event.addListener(eventMarker, 'click', function() {
        infoWindowEvent.open(map, eventMarker);
      });

      var infoWindowUser = new google.maps.InfoWindow({
        content: contentStringUser
      });

      google.maps.event.addListener(userMarker, 'click', function() {
        infoWindowUser.open(map, userMarker);
      });

    }
  
  google.maps.event.addDomListener(window, 'load', initialize);
  });
    
</script>

<br>

<%= link_to 'New Event', new_event_path %>
